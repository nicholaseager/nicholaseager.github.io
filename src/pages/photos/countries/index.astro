---
import Page from "../../../layouts/Page.astro";
import { getCollection } from "astro:content";
import Image from "../../../components/image-kit/Image";
import Card from "../../../components/ui/Card";
import Grid from "../../../components/ui/Grid";
import Text from "../../../components/ui/Text";

const locations = await getCollection("photoLocations");
const countries = locations
  .filter((location) => location.data.type === "country")
  .sort((a, b) => (a.data.photos.length > b.data.photos.length ? -1 : 1));
---

<Page
  title="Countries"
  description="Sometimes a single photo is all you need to tell a story. Browse my most unique stories."
>
  <div class="space-y-8">
    <Grid>
      {
        countries.map((country) => (
          <Card className="w-full h-64">
            <a
              href={`/photos/countries/${country.data.path}`}
              class="relative block w-full h-full"
            >
              <Image
                path={country.data.previewImage}
                className="absolute inset-0 w-full h-full object-cover"
              />
              <div class="absolute inset-0 bg-black/50 flex flex-col items-center justify-center text-white">
                <Text
                  variant="h2"
                  className="font-bold uppercase text-white shadow-md"
                >
                  {country.data.name}
                </Text>
                <Text
                  variant="caption"
                  className="uppercase text-white shadow-md"
                >
                  {`${country.data.photos.length} photo${country.data.photos.length !== 1 ? "s" : ""}`}
                </Text>
              </div>
            </a>
          </Card>
        ))
      }
    </Grid>
  </div>
</Page>
