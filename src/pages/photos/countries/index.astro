---
import Page from "../../../layouts/Page.astro";
import { getCollection } from "astro:content";
import Grid from "../../../components/ui/Grid";
import HeroCard from "../../../components/ui/HeroCard";

const locations = await getCollection("photoLocations");
const countries = locations
  .filter((location) => location.data.type === "country")
  .sort((a, b) => (a.data.photos.length > b.data.photos.length ? -1 : 1));
---

<Page
  title="Countries"
  description="Sometimes a single photo is all you need to tell a story. Browse my most unique stories."
>
  <div class="space-y-8">
    <Grid>
      {
        countries.map((country) => (
          <HeroCard
            title={country.data.name}
            subtitle={`${country.data.photos.length} photo${country.data.photos.length !== 1 ? "s" : ""}`}
            imagePath={country.data.previewImage}
            href={`/photos/countries/${country.data.path}`}
          />
        ))
      }
    </Grid>
  </div>
</Page>
