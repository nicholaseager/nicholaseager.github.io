---
import { getCollection } from "astro:content";
import Page from "../../../layouts/Page.astro";
import PhotoGrid from "../../../components/photos/PhotoGrid";
import PhotosSEO from "../../../seo/PhotosSEO.astro";

export async function getStaticPaths() {
  const locations = await getCollection("photoLocations");

  return locations.map((location) => ({
    params: { slug: location.data.path },
    props: {
      title: location.data.name,
      description: `Photos from ${location.data.name}`,
      photos: location.data.photos,
      type: location.data.type,
      parentPath: location.data.parentPath,
    },
  }));
}

type Props = {
  title: string;
  description: string;
  photos: string[];
};

const { title, description, photos } = Astro.props;
---

<Page title={title} description={description}>
  <PhotoGrid client:visible photos={photos} />
  <PhotosSEO name={title} description={description} images={photos} />
</Page>
