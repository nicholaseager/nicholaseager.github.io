---
import Gallery from "../../../../../layouts/Gallery.astro";
import { getPhotoLocations } from "../../../../../utils/photo-locations";

export async function getStaticPaths() {
  const photoLocations = await getPhotoLocations();

  // Filter to only get region locations (those with country/region format in id)
  const locations = photoLocations.filter((l) => l.id.includes("/"));

  // Transform locations into Astro path params
  const uniquePaths = locations.map((location) => {
    const [country, region] = location.id.split("/");
    return {
      params: { country, region },
      props: {
        location,
      },
    };
  });
  return uniquePaths;
}

const { location } = Astro.props;
---

<Gallery {...location} />
