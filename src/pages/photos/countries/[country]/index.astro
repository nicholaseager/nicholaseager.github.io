---
import Gallery from "../../../../layouts/Gallery.astro";
import { getPhotoLocations } from "../../../../utils/photo-locations";

export async function getStaticPaths() {
  const photoLocations = await getPhotoLocations();

  // Filter to only get country locations (those without country/region format in id)
  const countries = photoLocations.filter((l) => !l.id.includes("/"));

  // Transform countries into Astro path params
  return countries.map((country) => {
    const id = country.id;
    return {
      params: { country: id },
      props: {
        country,
      },
    };
  });
}

const { country } = Astro.props;
---

<Gallery {...country} />
