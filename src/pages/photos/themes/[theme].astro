---
import Page from "../../../layouts/Page.astro";
import PhotoGrid from "../../../components/photos/PhotoGrid";
import GallerySEO from "../../../seo/GallerySEO.astro";
import { getPhotoThemes } from "../../../utils/photo-themes";

export async function getStaticPaths() {
  const themes = await getPhotoThemes();

  return themes.map((theme) => ({
    params: { theme: theme.id },
    props: {
      ...theme,
    },
  }));
}

const { title, description, photos, previewPhoto } = Astro.props;
---

<Page title={title} description={description}>
  <PhotoGrid client:visible photos={photos.map((p) => p.slug)} />
  <GallerySEO
    title={title}
    description={description}
    images={photos.map((p) => p.slug)}
    image={previewPhoto.slug}
  />
</Page>
