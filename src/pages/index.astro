---
import Banner from "../components/Banner.astro";
import ResponsiveWidth from "../components/layout/ResponsiveWidth.astro";
import TestimonialSwiper from "../components/testimonials/TestimonialSwiper";
import Text from "../components/ui/Text";
import LinkButton from "../components/ui/LinkButton";
import YouTubeVideo from "../components/YouTubeVideo.astro";
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
import { getLatestFilm, getLatestGuides } from "../utils/latest";
import GuideSwiper from "../components/guide/GuideSwiper";
import YouTubeIcon from "/src/assets/icons/YouTube.svg";

const guides = await getCollection("guides");
const latestGuides = getLatestGuides(guides, 10);

const films = await getCollection("films");
const latestFilm = getLatestFilm(films);
---

<Layout navStyle="transparent">
  <Banner
    title="Adventure Film and Photos"
    subtitle="by Nicholas Eager"
    type="video"
    media="/home-intro.mp4"
  />

  <main>
    <div class="my-8 md:my-16 space-y-8">
      <ResponsiveWidth size="md">
        <Text variant="h2">Latest YouTube</Text>
      </ResponsiveWidth>
      <ResponsiveWidth size="lg">
        <YouTubeVideo videoId={latestFilm.id} />
      </ResponsiveWidth>
      <ResponsiveWidth size="md">
        <Text spacing="tight" variant="body"
          >I spend a lot of my time exploring and documenting exciting and
          unique locations, activities, and cultures. I am responsible for all
          aspects of the filmmaking process, including planning and executing
          shoots, as well as editing and post-production work. Want to come
          along? Subscribe to my channel on YouTube.</Text
        >
        <div class="flex flex-col items-center justify-center">
          <Text spacing="tight" variant="h4">Want to come along?</Text>
          <LinkButton href="/youtube" variant="primary">
            <div class="flex items-center justify-center gap-2">
              <YouTubeIcon />
              Subscribe on YouTube
            </div>
          </LinkButton>
        </div>
      </ResponsiveWidth>

      <ResponsiveWidth size="md">
        <Text variant="h2">Latest Travel Guides</Text>
      </ResponsiveWidth>
      <ResponsiveWidth size="lg">
        <GuideSwiper client:visible guides={latestGuides} />
      </ResponsiveWidth>

      <ResponsiveWidth size="md">
        <Text variant="h2">What They Say</Text>
      </ResponsiveWidth>
      <ResponsiveWidth size="lg">
        <TestimonialSwiper client:visible />
      </ResponsiveWidth>

      <ResponsiveWidth size="md">
        <Text variant="h2" spacing="tight">Ready to Work Together?</Text>
        <Text variant="body" spacing="tight">
          For business inquiries, such as a collaboration or licensing, please
          contact me.
        </Text>
        <LinkButton href="/youtube" variant="primary">
          Get in touch
        </LinkButton>
      </ResponsiveWidth>
    </div>
  </main>
</Layout>
